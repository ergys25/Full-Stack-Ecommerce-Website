import{s as re,c as W,n as $,g as ue}from"../chunks/scheduler.20e5b616.js";import{S as ae,i as ne,g as m,s as E,m as P,h as v,j as y,f as g,c as I,n as j,y as F,k as h,a as M,x as c,A as oe,o as A,t as H,b as ie,d as S,p as ce,e as X,z as de,r as fe,u as he,v as pe,w as _e}from"../chunks/index.314d0a10.js";import{e as Z}from"../chunks/each.e59479a4.js";import{r as me,c as ee}from"../chunks/cart.54eca98a.js";import{j as ve}from"../chunks/singletons.6022c947.js";function ge(i){let e,a,l,s,o,t,r,n,f=i[0].name+"",b,k,T,u=i[0].description+"",d,p,x,D,N,V=parseFloat(i[0].price).toFixed(2)+"",U,O,q,w,G='<img src="/delete-icon.png" alt="" class="h-4 w-4"/>',B,J;return{c(){e=m("div"),a=m("div"),l=m("img"),t=E(),r=m("div"),n=m("p"),b=P(f),k=E(),T=m("p"),d=P(u),p=E(),x=m("div"),D=m("p"),N=P("$"),U=P(V),O=P(" USD"),q=E(),w=m("button"),w.innerHTML=G,this.h()},l(C){e=v(C,"DIV",{class:!0});var _=y(e);a=v(_,"DIV",{});var R=y(a);l=v(R,"IMG",{src:!0,alt:!0}),R.forEach(g),t=I(_),r=v(_,"DIV",{class:!0});var z=y(r);n=v(z,"P",{class:!0});var Y=y(n);b=j(Y,f),Y.forEach(g),k=I(z),T=v(z,"P",{class:!0});var K=y(T);d=j(K,u),K.forEach(g),z.forEach(g),p=I(_),x=v(_,"DIV",{class:!0});var Q=y(x);D=v(Q,"P",{class:!0});var L=y(D);N=j(L,"$"),U=j(L,V),O=j(L," USD"),L.forEach(g),Q.forEach(g),q=I(_),w=v(_,"BUTTON",{class:!0,"data-svelte-h":!0}),F(w)!=="svelte-zr4z8z"&&(w.innerHTML=G),_.forEach(g),this.h()},h(){W(l.src,s=i[0].image)||h(l,"src",s),h(l,"alt",o=i[0].name),h(n,"class","text-white font-bold text-xl"),h(T,"class","text-neutral-500"),h(r,"class","col-span-3"),h(D,"class","text-white"),h(x,"class","col-span-2"),h(w,"class","absolute top-0 right-0 rounded-full p-1 border border-white opacity-0 group-hover:opacity-100 hover:border-red-500 duration-300"),h(e,"class","group relative grid grid-cols-6 gap-2 border-b border-neutral-600")},m(C,_){M(C,e,_),c(e,a),c(a,l),c(e,t),c(e,r),c(r,n),c(n,b),c(r,k),c(r,T),c(T,d),c(e,p),c(e,x),c(x,D),c(D,N),c(D,U),c(D,O),c(e,q),c(e,w),B||(J=oe(w,"click",i[1]),B=!0)},p(C,[_]){_&1&&!W(l.src,s=C[0].image)&&h(l,"src",s),_&1&&o!==(o=C[0].name)&&h(l,"alt",o),_&1&&f!==(f=C[0].name+"")&&A(b,f),_&1&&u!==(u=C[0].description+"")&&A(d,u),_&1&&V!==(V=parseFloat(C[0].price).toFixed(2)+"")&&A(U,V)},i:$,o:$,d(C){C&&g(e),B=!1,J()}}}function be(i,e,a){let{index:l}=e,{product:s}=e;const o=()=>me(l);return i.$$set=t=>{"index"in t&&a(2,l=t.index),"product"in t&&a(0,s=t.product)},[s,o,l]}class xe extends ae{constructor(e){super(),ne(this,e,be,ge,re,{index:2,product:0})}}const ke=ve("goto");function te(i,e,a){const l=i.slice();return l[4]=e[a],l[6]=a,l}function Ce(i){let e,a="Your cart is empty";return{c(){e=m("p"),e.textContent=a,this.h()},l(l){e=v(l,"P",{class:!0,"data-svelte-h":!0}),F(e)!=="svelte-1bkb9st"&&(e.textContent=a),this.h()},h(){h(e,"class","text-center text-neutral-400 text-2xl mt-12")},m(l,s){M(l,e,s)},p:$,i:$,o:$,d(l){l&&g(e)}}}function ye(i){let e,a,l=Z(i[0]),s=[];for(let t=0;t<l.length;t+=1)s[t]=le(te(i,l,t));const o=t=>H(s[t],1,1,()=>{s[t]=null});return{c(){for(let t=0;t<s.length;t+=1)s[t].c();e=X()},l(t){for(let r=0;r<s.length;r+=1)s[r].l(t);e=X()},m(t,r){for(let n=0;n<s.length;n+=1)s[n]&&s[n].m(t,r);M(t,e,r),a=!0},p(t,r){if(r&1){l=Z(t[0]);let n;for(n=0;n<l.length;n+=1){const f=te(t,l,n);s[n]?(s[n].p(f,r),S(s[n],1)):(s[n]=le(f),s[n].c(),S(s[n],1),s[n].m(e.parentNode,e))}for(ce(),n=l.length;n<s.length;n+=1)o(n);ie()}},i(t){if(!a){for(let r=0;r<l.length;r+=1)S(s[r]);a=!0}},o(t){s=s.filter(Boolean);for(let r=0;r<s.length;r+=1)H(s[r]);a=!1},d(t){t&&g(e),de(s,t)}}}function le(i){let e,a;return e=new xe({props:{product:i[4],index:i[6]}}),{c(){fe(e.$$.fragment)},l(l){he(e.$$.fragment,l)},m(l,s){pe(e,l,s),a=!0},p(l,s){const o={};s&1&&(o.product=l[4]),e.$set(o)},i(l){a||(S(e.$$.fragment,l),a=!0)},o(l){H(e.$$.fragment,l),a=!1},d(l){_e(e,l)}}}function se(i){let e,a,l="Total: $0 USD",s,o,t="Proceed to checkout",r,n;return{c(){e=m("div"),a=m("h2"),a.textContent=l,s=E(),o=m("button"),o.textContent=t,this.h()},l(f){e=v(f,"DIV",{class:!0});var b=y(e);a=v(b,"H2",{class:!0,"data-svelte-h":!0}),F(a)!=="svelte-1w1034s"&&(a.textContent=l),s=I(b),o=v(b,"BUTTON",{class:!0,"data-svelte-h":!0}),F(o)!=="svelte-1r6d586"&&(o.textContent=t),b.forEach(g),this.h()},h(){h(a,"class","text-xl font-bold"),h(o,"class","bg-blue-500 rouned-full px-4 py-2 font-bold hover:bg-blue-600 duration-300"),h(e,"class","flex flex-col items-end space-y-4")},m(f,b){M(f,e,b),c(e,a),c(e,s),c(e,o),r||(n=oe(o,"click",i[1]),r=!0)},p:$,d(f){f&&g(e),r=!1,n()}}}function Te(i){let e,a,l='<h1 class="text-4xl font-bold">Cart</h1> <a href="/categories" class="text-neutral-400 underline hover:text-blue-500 duration-300">Continue shopping</a>',s,o,t,r,n,f;const b=[ye,Ce],k=[];function T(d,p){return d[0].length>0?0:1}t=T(i),r=k[t]=b[t](i);let u=i[0].length>0&&se(i);return{c(){e=m("div"),a=m("div"),a.innerHTML=l,s=E(),o=m("div"),r.c(),n=E(),u&&u.c(),this.h()},l(d){e=v(d,"DIV",{class:!0});var p=y(e);a=v(p,"DIV",{class:!0,"data-svelte-h":!0}),F(a)!=="svelte-1x0shlk"&&(a.innerHTML=l),s=I(p),o=v(p,"DIV",{class:!0});var x=y(o);r.l(x),x.forEach(g),n=I(p),u&&u.l(p),p.forEach(g),this.h()},h(){h(a,"class","flex justify-between items-center"),h(o,"class","py-12 flex flex-col space-y-4"),h(e,"class","text-white px-96 py-12")},m(d,p){M(d,e,p),c(e,a),c(e,s),c(e,o),k[t].m(o,null),c(e,n),u&&u.m(e,null),f=!0},p(d,[p]){let x=t;t=T(d),t===x?k[t].p(d,p):(ce(),H(k[x],1,1,()=>{k[x]=null}),ie(),r=k[t],r?r.p(d,p):(r=k[t]=b[t](d),r.c()),S(r,1),r.m(o,null)),d[0].length>0?u?u.p(d,p):(u=se(d),u.c(),u.m(e,null)):u&&(u.d(1),u=null)},i(d){f||(S(r),f=!0)},o(d){H(r),f=!1},d(d){d&&g(e),k[t].d(),u&&u.d()}}}function De(i,e,a){let l=ue(ee);const s=t=>t.reduce((r,n)=>r+n.price*n.quantity,0),o=async()=>{const r=await(await fetch("/api/checkout",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({items:l})})).json();ke(r.url,{replaceState:!0})};return ee.subscribe(t=>{a(0,l=t),s(t)}),[l,o]}class Ve extends ae{constructor(e){super(),ne(this,e,De,Te,re,{})}}export{Ve as component};
